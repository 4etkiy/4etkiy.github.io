(this.webpackJsonptest_unitbean=this.webpackJsonptest_unitbean||[]).push([[0],{15:function(e,a,t){e.exports={card:"MovieCard_card__3B7zx",infoTitle:"MovieCard_infoTitle__1cfGT",title:"MovieCard_title__2wPmP",image:"MovieCard_image__1ELK6",desc:"MovieCard_desc__MErqL"}},41:function(e,a,t){e.exports=t(70)},46:function(e,a,t){},47:function(e,a,t){},7:function(e,a,t){e.exports={containerMoviePage:"MoviePage_containerMoviePage__2RYUZ",movie:"MoviePage_movie__1PNhV",info:"MoviePage_info__3QXbd",title:"MoviePage_title__2JAcH",image:"MoviePage_image__1h4Pk",overview:"MoviePage_overview__EAIrS"}},70:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(17),i=t.n(o),c=(t(46),t(47),t(19)),s=t(20),l=t(22),m=t(21),p=t(13),u=t(10),v=t(39),g="6642a4dd205dd56e6d10c72356a854de",d=v.create({baseURL:"https://api.themoviedb.org/3/"}),_=function(e,a){var t={api_key:g,query:e,page:a};return d.get("search/movie",{params:t})},h=function(e){var a={api_key:g};return d.get("movie/".concat(e),{params:a})},f=function(e){var a={api_key:g};return d.get("movie/".concat(e,"/recommendations"),{params:a})},E=function(){var e={api_key:g};return d.get("genre/movie/list",{params:e})},M=function(e){return function(a){E(e).then((function(e){var t={};e.data.genres.forEach((function(e){t[e.id]=e.name})),a({type:"SET_GENRES",payload:t})}))}},y=t(15),b=t.n(y),N=function(e){var a=e.url,t=e.className;return r.a.createElement("img",{src:"".concat("https://image.tmdb.org/t/p/w500").concat(a),className:t,alt:""})},O=t(12),S=function(e){var a=e.movie;return r.a.createElement(O.c,{className:b.a.card,to:"/movie/".concat(a.id)},r.a.createElement(N,{url:a.poster_path,className:b.a.image}),r.a.createElement("div",{className:b.a.desc},r.a.createElement("h1",{className:b.a.title},a.title),r.a.createElement("p",null,r.a.createElement("span",{className:b.a.infoTitle},"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430: "),a.release_date),r.a.createElement("p",null,a.genres&&a.genres.join(", ")),r.a.createElement("p",null,a.overview)))},j=t(9),w=t.n(j),C={getMovies:function(e,a){return function(t,n){_(e,a).then((function(e){var r=n().genres,o=e.data.results.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{genres:e.genre_ids.map((function(e){return r[e]}))})})),i=Object(u.a)(Object(u.a)({},e.data),{},{results:o});t(a?{type:"ADD_MOVIES",payload:i}:function(e){return{type:"SET_MOVIES",payload:e}}(i))}))}},getGenres:M},P=function(e){Object(l.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).state={query:""},e.onChange=function(a){e.setState({query:a.target.value})},e.onSearch=function(){e.props.getMovies(e.state.query)},e.onShowMore=function(){e.props.getMovies(e.state.query,e.props.page+1)},e.onUp=function(){e.props.getMovies(e.state.query)},e.render=function(){return r.a.createElement("div",{className:w.a.pageContainer},r.a.createElement("div",{className:w.a.search},r.a.createElement("div",{className:w.a.searchContainer},r.a.createElement("input",{className:w.a.searchInput,placeholder:"Search",onChange:e.onChange,value:e.state.query}),r.a.createElement("button",{className:w.a.onSearch,onClick:e.onSearch},"Search")),r.a.createElement("button",{className:w.a.onShowMore,onClick:e.onShowMore},"Show more"),r.a.createElement("button",{className:w.a.onUp,onClick:e.onUp},"Up")),r.a.createElement("div",{className:w.a.list},e.props.movies.map((function(e){return r.a.createElement(S,{movie:e})}))))},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getGenres()}}]),t}(r.a.Component),I=Object(p.b)((function(e){return{movies:e.movies.results,page:e.movies.page,genres:e.genres}}),C)(P),k=t(7),T=t.n(k),L={getMovie:function(e){return function(a,t){h(e).then((function(e){a({type:"SET_MOVIE",payload:e.data})}))}},getRecommendations:function(e){return function(a,t){f(e).then((function(e){var n=t().genres,r=e.data.results.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{genres:e.genre_ids.map((function(e){return n[e]}))})}));a({type:"SET_RECOMMENDATION",payload:r})}))}},getGenres:M},D=function(e){Object(l.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getGenres()}},{key:"componentDidUpdate",value:function(e){var a=this.props.movie,t=this.props.match.params.movieId;(t!==e.match.params.movieId||!a&&this.props.genres)&&(this.props.getMovie(t),this.props.getRecommendations(t),window.scrollTo(0,0))}},{key:"render",value:function(){var e=this.props.movie&&this.props.movie.genres.map((function(e){return e.name}));return this.props.movie?r.a.createElement("div",{className:T.a.containerMoviePage},r.a.createElement("div",{className:T.a.movie},r.a.createElement(N,{url:this.props.movie.poster_path,className:T.a.image}),r.a.createElement("div",{className:T.a.info},r.a.createElement("h1",{className:T.a.title},this.props.movie.title),r.a.createElement("div",{className:T.a.release},"\u0413\u043e\u0434 \u0412\u044b\u043f\u0443\u0441\u043a\u0430 ",this.props.movie.release_date),r.a.createElement("div",{className:T.a.popularity},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c ",this.props.movie.popularity),r.a.createElement("div",{className:T.a.original_title},"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ",this.props.movie.original_title),r.a.createElement("div",{className:T.a.original_language},"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u044f\u0437\u044b\u043a ",this.props.movie.original_language),r.a.createElement("p",null,e.join(", "))),r.a.createElement(N,{url:this.props.movie.backdrop_path,className:T.a.image}),r.a.createElement("p",{className:T.a.overview},this.props.movie.overview)),r.a.createElement("div",{className:T.a.list},this.props.recommendation.map((function(e){return r.a.createElement(S,{movie:e})})))):r.a.createElement("div",null,"Loading...")}}]),t}(r.a.Component),R=Object(p.b)((function(e){return{movie:e.movie,recommendation:e.recommendation,genres:e.genres}}),L)(D),U=t(2),q=function(e){return r.a.createElement(O.b,null,r.a.createElement(U.a,{exact:!0,path:"/",component:I}),r.a.createElement(U.a,{path:"/movie/:movieId",component:R}))},x=t(14),G=t(40),V=t(27),A={page:1,results:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_MOVIES":return a.payload;case"ADD_MOVIES":return{page:a.payload.page,results:[].concat(Object(V.a)(e.results),Object(V.a)(a.payload.results))};default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_MOVIE":return a.payload;default:return e}},Q=[],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_RECOMMENDATION":return a.payload;default:return e}},Z=[],z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_GENRES":return a.payload;default:return e}},H=Object(x.c)({movies:J,movie:B,recommendation:X,genres:z}),K=Object(x.d)(H,Object(x.a)(G.a));i.a.render(r.a.createElement(O.a,null,r.a.createElement(p.a,{store:K},r.a.createElement(q,null))),document.getElementById("root"))},9:function(e,a,t){e.exports={pageContainer:"MovieListPage_pageContainer__1Cx3S",search:"MovieListPage_search__2ZXon",searchContainer:"MovieListPage_searchContainer__3-5gQ",searchInput:"MovieListPage_searchInput__2u4Q2",onSearch:"MovieListPage_onSearch__1mdlB",onShowMore:"MovieListPage_onShowMore__3Vh34",onUp:"MovieListPage_onUp__2GM7J",list:"MovieListPage_list__1pR2W",genres:"MovieListPage_genres__1x_9u"}}},[[41,1,2]]]);
//# sourceMappingURL=main.0e90506b.chunk.js.map